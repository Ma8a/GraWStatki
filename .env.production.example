# Core runtime
NODE_ENV=production
PORT=3000

# Network / proxy
CORS_ORIGINS=https://your-domain.example
REQUIRE_ORIGIN_HEADER=true
TRUST_PROXY=true

# Security / payload limits
SOCKET_MAX_PAYLOAD_BYTES=131072
INVALID_INPUT_LIMIT_PER_WINDOW=12
INVALID_INPUT_WINDOW_MS=10000
INVALID_INPUT_BAN_MS=30000

# Matchmaking / gameplay timings
MATCH_TIMEOUT_MS=60000
ROOM_INACTIVITY_TIMEOUT_MS=600000
ROOM_RECONNECT_GRACE_MS=3000
RECONNECT_TOKEN_TTL_MS=3600000

# Chat
RATE_LIMIT_CHAT_PER_WINDOW=8
RATE_LIMIT_CHAT_WINDOW_MS=4000
CHAT_HISTORY_MAX=80
CHAT_REPLAY_MAX=50
POST_GAME_CHAT_TTL_MS=60000

# Rate limits
RATE_LIMIT_SHOT_PER_WINDOW=90
RATE_LIMIT_SHOT_WINDOW_MS=1000
RATE_LIMIT_PLACE_SHIPS_PER_WINDOW=20
RATE_LIMIT_PLACE_SHIPS_WINDOW_MS=1500
RATE_LIMIT_JOIN_PER_WINDOW=8
RATE_LIMIT_RECONNECT_JOIN_PER_WINDOW=12
RATE_LIMIT_JOIN_WINDOW_MS=1500
RATE_LIMIT_GAME_CANCEL_PER_WINDOW=8
RATE_LIMIT_SEARCH_CANCEL_PER_WINDOW=8

# Redis / state / limiter
REDIS_URL=redis://:change_me@redis:6379
REDIS_REQUIRED=true
REDIS_KEY_PREFIX=battleship:prod
SOCKET_PRESENCE_TTL_MS=45000
SOCKET_PRESENCE_REFRESH_MS=15000
ROOM_SNAPSHOT_TTL_MS=1800000
QUEUE_ENTRY_TTL_MS=7200000
QUEUE_PARKED_TTL_MS=7200000

# Database / telemetry
DATABASE_URL=postgres://battleship:change_me@postgres:5432/battleship
DATABASE_REQUIRED=true
DB_POOL_MAX=20
DB_IDLE_TIMEOUT_MS=10000
DB_CONNECT_TIMEOUT_MS=5000

# Health/readiness
READY_PING_TIMEOUT_MS=800
READY_CACHE_MS=250
